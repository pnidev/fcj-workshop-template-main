---
title: "Workshop"
date: "`r Sys.Date()`"
weight: 5
chapter: false
pre: " <b> 5. </b> "
---


# Workshop Overview — Game Backend Project


## General Objectives
This workshop walks you step-by-step through deploying a complete backend for a Unity/Web game on AWS. After completing it, you will have:


- User authentication via Cognito (username/password + Google OAuth).
- A NoSQL database using DynamoDB for profiles, progress, and scores.
- Player avatar storage on S3 with presigned URL uploads.
- Lambda functions (ZIP) for lightweight logic and a Container Lambda (OpenCV/MediaPipe) for heavy image/AI processing.
- API Gateway (REST) for gameplay routes and API Gateway (WebSocket) for real‑time leaderboard.
- CI/CD pipeline (CodePipeline + CodeBuild) for automatic container build, ECR deployment, and Lambda updates.
- IAM configuration, CloudWatch monitoring/logging, and optional WAF.


## Workshop Structure
1. Cognito — Set up authentication + JWT authorizer.
2. DynamoDB — Create tables: `UserProfiles`, `UserProgress`, `Scores`.
3. S3 — Create `game-avatars` bucket, enable CORS, use presigned URLs.
4. ECR — Create repository for Container Lambda images.
5. Lambda — Implement ZIP functions + container-based Lambda for image processing.
6. API Gateway (REST) — Define routes and integrate with Lambda.
7. API Gateway (WebSocket) — Manage realtime leaderboard communication.
8. CI/CD — Set up CodePipeline + CodeBuild to automate builds and deployments.
9. IAM — Create proper roles for Lambda, CodeBuild, and CodePipeline.
10. Logging & Monitoring — Configure CloudWatch logs and alerts.
11. WAF — (Optional) Protect API from malicious requests.


## Technical Details
### DynamoDB
- Main tables:
- `UserProfiles` (PK: `userId`)
- `UserProgress` (PK: `userId`)
- `Scores` (PK: `gameArea`, SK: `score`)
- Streams enabled with `NEW_IMAGE` for realtime event processing.


### S3
- Bucket: `game-avatars`
- CORS: allow `PUT`, `POST`, `GET` (production should be more restrictive).
- Uploads handled via presigned URLs generated by backend.


### API & Lambda
- Common REST endpoints:
- `POST /score`, `GET /leaderboard`, `GET /leaderboard/global`
- `POST /progress`, `POST /unlock`, `POST /task/complete`
- `POST /money/add`, `POST /shop/buy`
- `POST /avatar/presign`, `POST /avatar/update`, `POST /avatar/process`
- WebSocket routes:
- `$connect`, `$disconnect`, `broadcast`
- Lambda Types:
- ZIP Lambdas for scoring, shop, progress, leaderboard.
- Container Lambda `AvatarProcessingLambda` using OpenCV + MediaPipe.


### CI/CD (CodePipeline + CodeBuild)
- Source: GitHub repository
- Build: CodeBuild (Docker enabled) → build image → push to ECR → update Lambda image.
- Provided `buildspec.yml` logs in to ECR, builds the image, pushes it, and updates Lambda.


### IAM
- Required permissions include Lambda, API Gateway, Cognito, DynamoDB, S3, CodeBuild, CodePipeline, CloudWatch, SNS, and `iam:PassRole`.


### Monitoring
- CloudWatch: log groups for Lambda, alarms for billing and errors.


## Workshop Outcomes
- Full backend system for a game: REST API, realtime WebSocket, database, avatar storage, and automated deployment pipeline.
- Configuration notes (ARNs, endpoints, presigned URL formats) for frontend/backend developers.
  
---

#### Content

1. [Workshop overview](5.1-Workshop-overview)
2. [Prerequiste](5.2-Prerequiste/)
3. [Creating DynamoDB and S3 Bucket](5.3-DynamoDB-S3/)
4. [Creating API Gateway & Lambda](5.4-API-GateWay-Lambda//)
5. [More about CI/CD](5.5-CI-CD//)
6. [Clean up](5.6-Cleanup/)